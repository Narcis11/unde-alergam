<!DOCTYPE html>
<html>
<html lang="ro">
<meta http-equiv="Content-type" content="text/html; charset=UTF-8"/>
<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<script src="/socket.io/socket.io.js"></script>
	<script src="js/client.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
	<link rel="stylesheet" href="http://www.jacklmoore.com/colorbox/example1/colorbox.css" />
	</script>
	<link rel="stylesheet" type="text/css" href="css/pagina_traseu.css" />

	<script type="text/javascript"
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7_q4j3wbRGmQr3V-wtKZrlv7Uz_-G7Dk&sensor=true">
	</script>
	<script type="text/javascript">
	var directionsDisplay;
	var directionsService = new google.maps.DirectionsService();
	var drawn =  new Array();
	var map;
	var routeInfo;
	var routeID = parseURLParams(document.location.href).id[0]; /*DE aici schimbi id-ul rutei afisate*/
	google.maps.event.addDomListener(window, 'load', initializeWithoutVieportPreservation);
	</script>

	<script type="text/javascript">
	var socket = io.connect();
	var loggedIn = false;

	socket.on('connect', function(){
		socket.emit('request_route_info', { id: routeID });
	});
	
     socket.on('send_route_info', function(data){
     	console.log("received route info");
     	routeInfo = data;
     	document.getElementsByClassName('rasp_cand')[0].innerHTML = data['whenField'];
     	document.getElementsByClassName('rasp_unde')[0].innerHTML = data['whereField'];
     	document.getElementsByClassName('rasp_circ')[0].innerHTML = data['trafficField'];
     	document.getElementsByClassName('rasp_caini')[0].innerHTML = data['dogsField'];
     	document.getElementsByClassName('rasp_lumin')[0].innerHTML = data['lightsField'];
     	document.getElementsByClassName('box_sigur')[0].innerHTML = data['safetyField'];
     	document.getElementsByClassName('box_obs')[0].innerHTML = data['observationsField'];
     	distanceField = data['distance']/1000 + "KM";
     	document.getElementsByClassName('distance')[0].innerHTML = distanceField ;
     	document.getElementsByClassName('titlu')[0].innerHTML = data['name'];
     	traseu = vectorToTraseu( data [ 'coordinates' ] );
    	calcRouteFromScratch( traseu ); 
     });

     
     </script>
	<body>

		<div id="map-canvas">

		</div>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="http://www.jacklmoore.com/colorbox/jquery.colorbox.js"></script>
		<title>Traseul tău</title>

		<div class="fundal"></div>


		<p class="titlu"><b>10 km Berceni</b></p>
		<p class="detalii"><b>Detalii traseu</b></p>
		<p class="form_cand">1. Când alergi de obicei?</p>
		<p class="rasp_cand">Dimineața</p>
		<p class="form_unde">2. Unde alergi de fel?</p>
		<p class="rasp_unde">Pe trotuar</p>
		<p class="form_circ">3. Traseul este intens circulat.</p>
		<p class="rasp_circ">2</p>
		<p class="form_caini">4. Sunt mulți câini pe traseu.</p>
		<p class="rasp_caini">4</p>
		<p class="form_lumin">5. Traseul este bine luminat.</p>
		<p class="rasp_lumin">5</p>
		<p class="form_sigur">6. Te simți în siguranță alergând în zonă?<br> Dacă nu, de ce?</p>
		<div class="box_sigur">
			Da, consider că acest traseu nu prezintă probleme de siguranță.
		</div>
		<p class="form_obs">7. Alte observații relevante.</p>
		<div class="box_obs">
			Recomand traseul mai ales dimineața.
		</div>
		<table class="tbl_dist" border="1 px" bordercolor="red" >
			<tr>
				<td>Distanța:</td>
				<td class="distance">10 KM</td>
			</tr>
		</table>
		<a href="/index.html" class="acasa">Acasă</a>
	</body>

	</html>
